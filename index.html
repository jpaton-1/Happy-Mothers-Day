<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mother's Day AR - Simple Mobile Version</title>
    
    <!-- A-Frame -->
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <!-- AR.js Core -->
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    
    <style>
        .arjs-loader {
            position: fixed;
            z-index: 999;
            overflow: show;
            margin: auto;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .arjs-loader div {
            text-align: center;
            color: white;
            max-width: 80%;
            font-family: Arial, Helvetica, sans-serif;
        }
        
        .place-button {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: #FF69B4;
            color: white;
            font-weight: bold;
            padding: 15px 30px;
            border: none;
            border-radius: 30px;
            font-size: 18px;
            z-index: 999;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }
        
        .reset-button {
            position: fixed;
            bottom: 30px;
            right: 20px;
            background: #f44336;
            color: white;
            font-weight: bold;
            padding: 10px;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 18px;
            z-index: 999;
            display: none;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }
    </style>
</head>
<body style="margin: 0; overflow: hidden;">
    <!-- Loading screen -->
    <div class="arjs-loader">
        <div>
            <h1>Happy Mother's Day!</h1>
            <p>Loading AR experience...</p>
            <p>Please allow camera access when prompted.</p>
        </div>
    </div>
    
    <!-- Simple tap button -->
    <button id="place-button" class="place-button">Tap to Place Flowers</button>
    <button id="reset-button" class="reset-button">â†º</button>
    
    <!-- A-Frame scene -->
    <a-scene
        embedded
        arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false;"
        renderer="logarithmicDepthBuffer: true; precision: mediump;"
        vr-mode-ui="enabled: false">
        
        <!-- Our flower models -->
        <a-assets>
            <a-asset-item id="flower1" src="./models/6 Orchid.glb"></a-asset-item>
            <a-asset-item id="flower2" src="./models/7 Poppy.glb"></a-asset-item>
            <a-asset-item id="flower3" src="./models/8 Iris.glb"></a-asset-item>
            <a-asset-item id="flower4" src="./models/13 Marigold.glb"></a-asset-item>
            <a-asset-item id="flower5" src="./models/16 Lavender.glb"></a-asset-item>
        </a-assets>
        
        <!-- Flower container (initially hidden) -->
        <a-entity id="flower-container" visible="false" position="0 0 -1">
            <!-- Individual flowers will be added here by JavaScript -->
        </a-entity>
        
        <!-- Camera -->
        <a-entity camera position="0 1.6 0" look-controls="enabled: false"></a-entity>
    </a-scene>
    
    <script>
        // Wait for DOM to load
        document.addEventListener('DOMContentLoaded', function() {
            // Get references to elements
            const scene = document.querySelector('a-scene');
            const loader = document.querySelector('.arjs-loader');
            const placeButton = document.getElementById('place-button');
            const resetButton = document.getElementById('reset-button');
            const flowerContainer = document.getElementById('flower-container');
            
            // Hide loader when scene loads
            scene.addEventListener('loaded', function() {
                loader.style.display = 'none';
            });
            
            // Fallback - hide loader after timeout
            setTimeout(() => {
                loader.style.display = 'none';
            }, 5000);
            
            // Handle tap button click
            placeButton.addEventListener('click', function() {
                // Hide the place button
                placeButton.style.display = 'none';
                
                // Show the reset button
                resetButton.style.display = 'block';
                
                // Show flower container
                flowerContainer.setAttribute('visible', true);
                
                // Clear any existing flowers
                while (flowerContainer.firstChild) {
                    flowerContainer.removeChild(flowerContainer.firstChild);
                }
                
                // Add spinning animation to container
                flowerContainer.setAttribute('animation', {
                    property: 'rotation',
                    to: '0 360 0',
                    loop: true,
                    dur: 15000,
                    easing: 'linear'
                });
                
                // Get available flower models
                const flowerModels = [
                    '#flower1',
                    '#flower2',
                    '#flower3',
                    '#flower4',
                    '#flower5'
                ];
                
                // Create a bouquet of flowers
                for (let i = 0; i < 5; i++) {
                    // Calculate position in a circle
                    const angle = (i / 5) * Math.PI * 2;
                    const distance = 0.3;
                    const x = Math.cos(angle) * distance;
                    const z = Math.sin(angle) * distance;
                    
                    // Create flower entity
                    const flower = document.createElement('a-entity');
                    flower.setAttribute('gltf-model', flowerModels[i % flowerModels.length]);
                    flower.setAttribute('position', `${x} 0 ${z}`);
                    flower.setAttribute('scale', '0.5 0.5 0.5');
                    flower.setAttribute('rotation', `0 ${Math.random() * 360} 0`);
                    
                    // Add to container
                    flowerContainer.appendChild(flower);
                }
                
                // Add message
                const message = document.createElement('a-entity');
                message.setAttribute('text', {
                    value: 'Happy Mother\'s Day!\nI love you, Mom!',
                    color: '#FF1493',
                    align: 'center',
                    width: 2
                });
                message.setAttribute('position', '0 0.7 0');
                flowerContainer.appendChild(message);
            });
            
            // Handle reset button click
            resetButton.addEventListener('click', function() {
                // Hide flower container
                flowerContainer.setAttribute('visible', false);
                flowerContainer.removeAttribute('animation');
                
                // Show place button
                placeButton.style.display = 'block';
                
                // Hide reset button
                resetButton.style.display = 'none';
            });
        });
    </script>
</body>
</html>